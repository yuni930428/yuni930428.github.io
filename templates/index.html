<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>飲食計劃</title>
    <link rel="stylesheet" href="static/styles.css">
</head>
<body>
    <div class="container">
        <h1>個性化飲食計劃</h1>
        <form id="dietForm">
            <div class="form-group">
                <label for="age">年齡:</label>
                <input type="number" name="age" id="age" required>
            </div>
            <div class="form-group">
                <label for="weight">體重 (kg):</label>
                <input type="number" step="0.1" name="weight" id="weight" required>
            </div>
            <div class="form-group">
                <label for="height">身高 (cm):</label>
                <input type="number" step="0.1" name="height" id="height" required>
            </div>
            <div class="form-group">
                <label for="goal">目標:</label>
                <select name="goal" id="goal" required>
                    <option value="weight_loss">減重</option>
                    <option value="muscle_gain">增肌</option>
                    <option value="maintain_weight">維持體重</option>
                    <option value="balanced">均衡飲食</option>
                </select>
            </div>
            <div class="form-group">
                <label for="preference">飲食偏好:</label>
                <select name="preference" id="preference" required>
                    <option value="vegetarian">素食</option>
                    <option value="non_vegetarian">非素食</option>
                </select>
            </div>
            <button type="submit" class="submit-btn">提交</button>
        </form>
    </div>

    <script>
        // 計算 BMI 和健康狀況的邏輯
        document.getElementById("dietForm").addEventListener("submit", function(event) {
            event.preventDefault();  // 防止表單提交

            // 獲取用戶輸入的數據
            const weight = parseFloat(document.getElementById("weight").value);
            const height = parseFloat(document.getElementById("height").value);
            const goal = document.getElementById("goal").value;
            const preference = document.getElementById("preference").value;

            // 計算 BMI
            const bmi = weight / Math.pow(height / 100, 2);  // BMI = 體重 / (身高^2)

            // 根據 BMI 顯示健康狀況
            let healthStatus;
            if (bmi < 18.5) {
                healthStatus = "體重過輕";
            } else if (bmi >= 18.5 && bmi < 24.9) {
                healthStatus = "正常範圍";
            } else if (bmi >= 25 && bmi < 29.9) {
                healthStatus = "過重";
            } else {
                healthStatus = "肥胖";
            }

            // 將 BMI 和健康狀況傳遞到結果頁面
            localStorage.setItem("bmi", bmi);
            localStorage.setItem("healthStatus", healthStatus);
            localStorage.setItem("goal", goal);  // 傳遞目標

            // 重定向到結果頁面
            window.location.href = "result.html";
        });
    </script>
</body>
</html>
